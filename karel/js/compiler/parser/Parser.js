function Parser(){this.scanner=new TokenScanner;this.scanner.setIgnoreWhitespaceFlag(!0);this.scanner.setIgnoreCommentsFlag(!0);this.scanner.setScanNumbersFlag(!0);this.scanner.setScanStringsFlag(!0);this.prefixProperties={};this.infixProperties={}}Parser.prototype.parse=function(){var a=this.readE(0),b=this.nextToken();if(""!=b)throw Error('Unexpected token "'+b+'"');return a};
Parser.prototype.readE=function(a){a||=0;for(var b=this.readT(),c=this.nextToken();this.takesPrecedence(c,a);)b=this.infixProperties[c.text].action(this,c,b),c=this.nextToken();this.saveToken(c);return b};Parser.prototype.readT=function(){var a=this.nextToken();switch(TokenScanner.getTokenType(a.text)){case TokenScanner.EOF:throw Error("Unexpected end of line");case TokenScanner.WORD:case TokenScanner.OPERATOR:var b=this.prefixProperties[a.text];if(b)return b.action(this,a)}return a};
Parser.prototype.definePrefixOperator=function(a,b,c){c||=0;this.prefixProperties[a]={prec:c,assoc:"LEFT",action:b};this.scanner.isValidIdentifier(a.charAt(0))||this.scanner.defineOperator(a)};Parser.prototype.defineInfixOperator=function(a,b,c,d){c||=0;d||="LEFT";this.infixProperties[a]={prec:c,assoc:d,action:b};this.scanner.isValidIdentifier(a.charAt(0))||this.scanner.defineOperator(a)};Parser.prototype.setInput=function(a){this.scanner.setInput(a)};Parser.prototype.nextToken=function(){return this.scanner.nextToken()};
Parser.prototype.peekNext=function(){let a=this.nextToken();this.saveToken(a);return a};Parser.prototype.nextTokenIndentLevel=function(){return this.scanner.nextTokenIndentLevel()};Parser.prototype.saveToken=function(a){this.scanner.saveToken(a)};Parser.prototype.verifyToken=function(a){return this.scanner.verifyToken(a)};Parser.prototype.verifyNewline=function(a){return this.scanner.verifyNewline(a)};Parser.prototype.hasMoreTokens=function(){return this.scanner.hasMoreTokens()};
Parser.prototype.takesPrecedence=function(a,b){switch(this.scanner.getTokenType(a.text)){case TokenScanner.WORD:case TokenScanner.OPERATOR:if(a=this.infixProperties[a.text]){var c=a.prec;return c==b?"RIGHT"==a.assoc:c>b}}return!1};Parser.unparse=function(a){if(a instanceof Array){for(var b="(",c=0;c<a.length;c++)0<c&&(b+=" "),b+=Parser.unparse(a[c]);return b+")"}return a};Parser.prototype.toString=function(){return typeof this+"(...)"};
