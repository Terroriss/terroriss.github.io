function DeployDialog(){}DeployDialog._boxy=null;DeployDialog._karelIdeHandle=null;DeployDialog._boxyExists=function(){return DeployDialog._boxy&&DeployDialog._boxy.isVisible()};
DeployDialog.deploy=function(){var a=DeployDialog._karelIdeHandle.getCode(),c=document.getElementById("deployAuthor").value,e=document.getElementById("deployProgramName").value,f=document.getElementById("deployWorld").value,d={"Your Program":a,"Program Name":e,"Your Name":c};if(a==STARTER_CODE)DeployDialog.displayError("Can not submit starter code.");else{for(key in d){value=d[key];if(5>value.length){DeployDialog.displayError(key+" is too short");return}if("Your Program"!=key&&15<value.length){DeployDialog.displayError(key+
" is too long");return}}if(""==f)DeployDialog.displayError("You must provide a Default World.");else{DeployDialog.clearError();var g=new Boxy("<p>Please wait...</p>",{title:"Deploying",closeable:!1,modal:!0});d=$(window).height()-1;var h=$(window).width()-1;g.centerAt(.5*h,.4*d);$.post("http://www.stanfordkarel.appspot.com/submitRemote",{code:a,author:c,title:e,world:f},function(b){console.log("submtter "+b);if("ERROR"!=b){b="http://"+document.location.hostname+"/program.html#/"+b;var k='<div id="dialogDeploySuccess"><b>Success! Here is your link.<br/>You can share it with anyone: </b><br/><br/><a id="userProgramLink" href="'+
b+'">'+b+"</a></div>"}DeployDialog._boxy.setContent(k);DeployDialog.resize();g.hideAndUnload()})}}};DeployDialog.clearError=function(){$("#deployError").html("")};DeployDialog.displayError=function(a){a="Error: "+a;$("#deployError").html(a)};
DeployDialog.createDeployDialog=function(a){$("#deployError")&&$("#deployError").remove();$("#deployProgramName")&&$("#deployProgramName").remove();$("#deployAuthor")&&$("#deployAuthor").remove();$("#deployWorld")&&$("#deployWorld").remove();DeployDialog._karelIdeHandle=a;ReferenceDialog._boxyExists()||(DeployDialog._boxy=new Boxy('<div id="deploy">\t\t\t\t<p><b>Would you like to deploy your program?</b><p><br/>\t\t\t\t<b>Program Name</b><br>\t\t\t\t<input type="text" name="programTitle" class="deployInput" id = "deployProgramName" size=30><br/><br/>\t\t\t\t<p><b>Your Name</b><br>\t\t\t\t<input class="deployInput" type="text" name="deployAuthor" id = "deployAuthor" size=30></p><br/>\t\t\t\t<p><b>Default World</b><br>\t\t\t\t<input class="deployInput" type="text" name="deployWorld" id = "deployWorld" size=30></p><br/>\t\t\t\t<p><b><span id="deployError"></span></b></p><br/>\t\t\t\t<p><button type="button" id="interactor" onClick="DeployDialog.deploy()"><b>Deploy: </b><IMG SRC="./images/uploadButton.png" HEIGHT=50 WIDTH=50 ALT="run" ALIGN="ABSMIDDLE"></button></form></p>\t\t\t</div>',
{title:"Deploy",modal:!0}),DeployDialog.resize())};DeployDialog.resize=function(){if(DeployDialog._boxyExists()){var a=$(window).height()-1,c=$(window).width()-1;DeployDialog._boxy.centerAt(.5*c,.4*a)}};
