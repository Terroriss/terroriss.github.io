<!doctype html><html lang=vi class="js csstransforms3d"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-207880070-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-207880070-1',{cookie_flags:'max-age=7200;secure;samesite=none'})</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=generator content="Hugo 0.88.1"><meta name=description content><meta name=author content="Minh Long"><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><title>Demo AI | Minesweeper</title><style>.darkmode-container{position:fixed;left:20px;bottom:20px}.background{height:100%;width:100%;display:block;padding:0;margin:0}</style><link href=/css/main-style.css?1635069853 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1635069853></script><link href=/css/dark-mode-btn.css?1635069853 rel=stylesheet><link href=/css/dark-mode.css?1635069853 rel=stylesheet><link href=/css/fontawesome-all.min.css?1635069853 rel=stylesheet><link href=/js/demo/minesweeper/minesweeper.css rel=stylesheet><script src=/js/demo/minesweeper/minesweeper.js></script><script src=/js/demo/minesweeper/minesweeperAI.js></script></head><boby class="background minesweeper-body" style=overflow-x:hidden><div class=game-play><div class=board></div></div><div class=game-setting><div class=game-go-home><a class=demo-link href=/ title=Home>âŒ‚</a></div><div class=game-init><div style="margin:8px 0"><div class=input-container><label for=new_rows>Rows:</label>
<input type=number id=new_rows placeholder=rows value=15 min=3 max=50></div><div class=input-container><label for=new_cols>Cols:</label>
<input type=number id=new_cols placeholder=cols value=15 min=3 max=50></div><div class=input-container><label for=new_mines>Mines:</label>
<input type=number id=new_mines placeholder=mines value=16 min=1 max=2000></div></div><div id=button-group style=display:flex;justify-content:space-between><input id=new_game_button type=button value="Create new game!"><div id=button-group-2></div></div></div><div class=game-status></div><div class=game-console></div><div class=game-control><div id=button-group-1></div></div></div><script>var r=document.querySelector(':root'),gameplay=document.querySelector(".game-play"),board=document.querySelector(".board"),gameconsole=document.querySelector(".game-console"),gamestatus=document.querySelector(".game-status"),cell_columns=check_number(document.getElementById("new_cols").value,3,50),cell_rows=check_number(document.getElementById("new_rows").value,3,50),mines=check_number(document.getElementById("new_mines").value,1,2e3),cell_size,game,ai,i,j,endGame,move,revealed,flags,na,button_group,btn_group_1,btn_group_2,tmp;mines>cell_rows*cell_columns&&(mines=Math.floor(4*(cell_rows*cell_columns)/5)),game=new Minesweeper(cell_rows,cell_columns,mines),ai=new MinesweeperAI(cell_rows,cell_columns),endGame=!1,move=null,revealed=new ArraySet,flags=new ArraySet,na=document.createElement("span"),button_group='<input onclick="ai_play()" type="button" value="AI  Play" /><input onclick="ai_stop()" type="button" value="AI  Stop" /><input onclick="cheat()" type="button" value="Cheat" />',btn_group_1=document.getElementById("button-group-1"),btn_group_2=document.getElementById("button-group-2"),window.innerWidth<555?(btn_group_1.innerHTML="",btn_group_2.innerHTML=button_group,tmp=window.innerHeight*.6,gameplay.setAttribute("style",`height: ${tmp}px`),document.getElementById("new_game_button").setAttribute("value","Create")):(btn_group_2.innerHTML="",btn_group_1.innerHTML=button_group,gameplay.setAttribute("style","height: 100vh;"),document.getElementById("new_game_button").setAttribute("value","Create new game!")),na.innerHTML="New game: "+cell_columns+" x "+cell_rows+": "+mines+" mines",gameconsole.appendChild(na),gamestatus.innerHTML='Playing<span class="one-dot">.</span><span class="two-dot">.</span><span class="three-dot">.</span>',set_game_board(),create_game(),window.addEventListener("resize",function(){if(window.innerWidth<555){btn_group_1.innerHTML="",btn_group_2.innerHTML=button_group;var a=window.innerHeight*.6;gameplay.setAttribute("style",`height: ${a}px`),document.getElementById("new_game_button").value="Create"}else btn_group_2.innerHTML="",btn_group_1.innerHTML=button_group,gameplay.setAttribute("style","height: 100vh;"),document.getElementById("new_game_button").value="Create new game!";set_game_board()});function updateConsole(){gameconsole.scrollTop=gameconsole.scrollHeight}function set_game_board(){var e=gameplay.getBoundingClientRect(),b=e.height,c=e.width,a=Math.floor(Math.min(Math.min(c,b)*.9/cell_rows,Math.min(c,b)*.9/cell_columns)),d;r.style.setProperty('--cell',a+"px"),d=a/2.3,d=a<15?a:d<15?15:d,r.style.setProperty('--cell-font',d+"px"),b=a*cell_rows+cell_rows+1,c=a*cell_columns+cell_columns+1,r.style.setProperty('--board-height',b+"px"),r.style.setProperty('--board-width',c+"px")}function create_game(){while(board.hasChildNodes())board.firstChild.remove();let a="";for(i=0;i<cell_rows;i++){a+='<div class="row">';for(j=0;j<cell_columns;j++)a+=`<div class="cell" data-x="${i}" data-y="${j}"></div>`;a+="</div>"}board.innerHTML=a,board.addEventListener("click",function(b){b.preventDefault();const a=b.target;if(!endGame)if(a.classList.contains("cell")){let b=parseInt(a.getAttribute("data-x"),10),c=parseInt(a.getAttribute("data-y"),10);if(!revealed.has([b,c]))if(game.is_mine([b,c]))revealed.add([b,c]),endGame=!0,ai_stop(),gamestatus.innerHTML="<p class='status-lost'>Lost</p>",a.classList.add("red-mine"),show_all_mines();else{nearby=game.nearby_mines([b,c]),revealed.add([b,c]),ai.add_knowledge([b,c],nearby);let d=document.createElement("span");nearby!=0&&(d.innerHTML=nearby,d.classList.add("count-"+nearby)),a.classList.add("revealed"),a.appendChild(d)}}}),board.addEventListener("contextmenu",function(b){b.preventDefault();const a=b.target;if(!endGame)if(a.classList.contains("cell")){let b=parseInt(a.getAttribute("data-x"),10),d=parseInt(a.getAttribute("data-y"),10);if(revealed.has([b,d])){if(flags.has([b,d])){for(flags.delete([b,d]);c.hasChildNodes();)c.firstChild.remove();c.classList.remove("flag")}}else{let a=document.querySelector(`.cell[data-x="${b}"][data-y="${d}"]`);if(flags.has([b,d])){for(flags.delete([b,d]);a.hasChildNodes();)a.firstChild.remove();a.classList.remove("flag")}else flags.add([b,d]),a.innerHTML="<img class='cell-img' src='/js/demo/minesweeper/flag.png' alt='flag'>",a.classList.add("flag"),game.mines_found=flags,game.won()&&(endGame=!0,ai_stop(),gamestatus.innerHTML="<p class='status-won'>Won</p>")}}})}function check_number(d,b,c){let a=parseInt(d,10);return a<b?b:a>c?c:a}function show_all_mines(){if(endGame)for(i=0;i<cell_rows;i++)for(j=0;j<cell_columns;j++)if(game.is_mine([i,j])){let a=document.querySelector(`.cell[data-x="${i}"][data-y="${j}"]`);a.classList.add("mine"),a.innerHTML="",a.innerHTML="<img class='cell-img' src='/js/demo/minesweeper/mine.png' alt='mine'>"}}window.addEventListener("DOMContentLoaded",()=>{document.getElementById("new_game_button").addEventListener("click",function(){ai_stop(),cell_columns=check_number(document.getElementById("new_cols").value,3,50),cell_rows=check_number(document.getElementById("new_rows").value,3,50),mines=check_number(document.getElementById("new_mines").value,1,2e3),mines>cell_rows*cell_columns&&(mines=Math.floor(4*(cell_rows*cell_columns)/5)),game=new Minesweeper(cell_rows,cell_columns,mines),ai=new MinesweeperAI(cell_rows,cell_columns),endGame=!1,move=null,revealed=new ArraySet,flags=new ArraySet,na=document.createElement("span"),gamestatus.innerHTML='Playing<span class="one-dot">.</span><span class="two-dot">.</span><span class="three-dot">.</span>',na.innerHTML="New game: "+cell_columns+" x "+cell_rows+": "+mines+" mines",gameconsole.innerHTML="",gameconsole.appendChild(na),set_game_board(),create_game()})});function ai_play(){endGame||setInterval(aiMove,100)}function ai_stop(){const a=window.setInterval(function(){},Number.MAX_SAFE_INTEGER);for(let b=1;b<a;b++)window.clearInterval(b)}function cheat(){let c=game.height,d=game.width,a="<table>";for(let b=0;b<c;b++){a+="<tr>";let e="";for(let a=0;a<d;a++)game.board[b][a]?e+="<th>X</th>":e+="<th>&nbsp&nbsp</th>";a+=e+"</tr>"}a+="</table>";let b=document.createElement("span");b.innerHTML=a,gameconsole.appendChild(b)}function aiMove(){var b,a,d,c;if(!endGame){if(b=document.createElement("span"),a=ai.make_safe_move(),a==null?(a=ai.make_random_move(),a?b.innerHTML="No known safe moves, AI making random move.":b.innerHTML="No moves left to make."):b.innerHTML="AI making safe move.",gameconsole.appendChild(b),updateConsole(),d=ai.mines,c=minusSet(d,flags),a){let b=document.createEvent('MouseEvents');b.initMouseEvent('click',!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),document.querySelector(`.cell[data-x="${a[0]}"][data-y="${a[1]}"]`).dispatchEvent(b)}const e=c[Symbol.iterator]();for(let a=0;a<c.size;a++){let b=e.next().value.split(","),d=document.createEvent('MouseEvents');d.initMouseEvent('contextmenu',!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),document.querySelector(`.cell[data-x="${b[0]}"][data-y="${b[1]}"]`).dispatchEvent(d)}}}</script><div class=darkmode-container><input id=dark-toggle class=dark-toggle type=checkbox>
<script>$(function(){let a=localStorage.getItem("not_sp");if(a=="true"){var b=$("<link />",{rel:"stylesheet",type:"text/css",href:"/css/dark-btn-mobile.css"});$('head').append(b)}});const mode=localStorage.getItem("dark_mode"),dark_btn=document.querySelector("#dark-toggle"),bg=document.querySelector("body").classList;if(bg.contains("background")||bg.add("background"),mode)mode=="true"?(bg.remove("light-mode"),dark_btn.checked=!0):(bg.add("light-mode"),dark_btn.checked=!1);else{const a=window.matchMedia("(prefers-color-scheme: dark)");a.matches?dark_mode(!0):dark_mode(!1)}function dark_mode(a){a?(bg.remove("light-mode"),localStorage.setItem("dark_mode",!0),dark_btn.checked=!0):(bg.add("light-mode"),localStorage.setItem("dark_mode",!1),dark_btn.checked=!1)}dark_btn.addEventListener("click",function(){const a=document.querySelector(".background").classList;a.contains("background-transition")||a.add("background-transition"),this.checked?dark_mode(!0):dark_mode(!1)})</script></div></body></html>