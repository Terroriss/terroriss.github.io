!function(d){function k(a,b){if(!(this instanceof k))return a=new k(a,b),a.open(),a;this.id=k.id++;this.setup(a,b);this.chainCallbacks(k._callbackChain)}if(void 0!==d)if(d.fn.jquery.match(/-ajax/))"console"in window&&window.console.info("Featherlight needs regular jQuery, not the slim version.");else{var q=[],r=function(a){return q=d.grep(q,function(b){return b!==a&&0<b.$instance.closest("body").length})},v={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,
mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},t={keyup:"onKeyUp",resize:"onResize"},w=function(a){d.each(k.opened().reverse(),function(){if(!a.isDefaultPrevented()&&!1===this[t[a.type]](a))return a.preventDefault(),a.stopPropagation(),!1})},u=function(a){if(a!==k._globalHandlerInstalled){k._globalHandlerInstalled=a;var b=d.map(t,function(c,e){return e+"."+k.prototype.namespace}).join(" ");d(window)[a?"on":"off"](b,w)}};k.prototype=
{constructor:k,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:d.noop,beforeContent:d.noop,beforeClose:d.noop,afterOpen:d.noop,afterContent:d.noop,afterClose:d.noop,onKeyUp:d.noop,onResize:d.noop,type:null,contentFilters:"jquery image html ajax iframe text".split(" "),
setup:function(a,b){"object"!=typeof a||0!=a instanceof d||b||(b=a,a=void 0);var c=d.extend(this,b,{target:a});a=c.resetCss?c.namespace+"-reset":c.namespace;a=d(c.background||['<div class="'+a+"-loading "+a+'">','<div class="'+a+'-content">','<button class="'+a+"-close-icon "+c.namespace+'-close" aria-label="Close">',c.closeIcon,"</button>",'<div class="'+c.namespace+'-inner">'+c.loading+"</div>","</div></div>"].join(""));var e="."+c.namespace+"-close"+(c.otherClose?","+c.otherClose:"");return c.$instance=
a.clone().addClass(c.variant),c.$instance.on(c.closeTrigger+"."+c.namespace,function(g){if(!g.isDefaultPrevented()){var f=d(g.target);("background"===c.closeOnClick&&f.is("."+c.namespace)||"anywhere"===c.closeOnClick||f.closest(e).length)&&(c.close(g),g.preventDefault())}}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var a=this.constructor.contentFilters,b=this.$currentTarget&&this.$currentTarget.attr(this.targetAttr),c=this.target||b||"",e=a[this.type];if(!e&&
c in a&&(e=a[c],c=this.target&&b),c=c||this.$currentTarget&&this.$currentTarget.attr("href")||"",!e)for(var g in a)this[g]&&(e=a[g],c=this[g]);if(!e){var f=c;if(c=null,d.each(this.contentFilters,function(){return(e=a[this]).test&&(c=e.test(f)),!c&&e.regex&&f.match&&f.match(e.regex)&&(c=f),!c}),!c)return"console"in window&&window.console.error("Featherlight: no content filter found "+(f?' for "'+f+'"':" (no target specified)")),!1}return e.process.call(this,c)},setContent:function(a){return this.$instance.removeClass(this.namespace+
"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",a.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(a).slice(1).remove().end().replaceWith(d.contains(this.$instance[0],a[0])?"":a),this.$content=a.addClass(this.namespace+"-inner"),this},open:function(a){var b=this;if(b.$instance.hide().appendTo(b.root),!(a&&a.isDefaultPrevented()||!1===b.beforeOpen(a))){a&&a.preventDefault();var c=b.getContent();if(c)return q.push(b),u(!0),b.$instance.fadeIn(b.openSpeed),b.beforeContent(a),
d.when(c).always(function(e){b.setContent(e);b.afterContent(a)}).then(b.$instance.promise()).done(function(){b.afterOpen(a)})}return b.$instance.detach(),d.Deferred().reject().promise()},close:function(a){var b=this,c=d.Deferred();return!1===b.beforeClose(a)?c.reject():(0===r(b).length&&u(!1),b.$instance.fadeOut(b.closeSpeed,function(){b.$instance.detach();b.afterClose(a);c.resolve()})),c.promise()},resize:function(a,b){if(a&&b&&(this.$content.css("width","").css("height",""),this.$content.parent().width()<
a||this.$content.parent().height()<b)){var c=Math.max(a/(this.$content.parent().width()-1),b/(this.$content.parent().height()-1));1<c&&(c=b/Math.floor(b/c),this.$content.css("width",a/c+"px").css("height",b/c+"px"))}},chainCallbacks:function(a){for(var b in a)this[b]=d.proxy(a[b],this,d.proxy(this[b],this))}};d.extend(k,{id:0,autoBind:"[data-featherlight]",defaults:k.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(a){return a instanceof d&&a},process:function(a){return!1!==this.persist?
d(a):d(a).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(a){var b=d.Deferred(),c=new Image,e=d('<img src="'+a+'" alt="" class="'+this.namespace+'-image" />');return c.onload=function(){e.naturalWidth=c.width;e.naturalHeight=c.height;b.resolve(e)},c.onerror=function(){b.reject(e)},c.src=a,b.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(a){return d(a)}},ajax:{regex:/./,process:function(a){var b=d.Deferred(),c=d("<div></div>").load(a,function(e,
g){"error"!==g&&b.resolve(c.contents());b.fail()});return b.promise()}},iframe:{process:function(a){var b=new d.Deferred,c=d("<iframe/>"),e=function(f,h){var m={};h=new RegExp("^"+h+"([A-Z])(.*)");for(var l in f){var n=l.match(h);n&&(m[(n[1]+n[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=f[l])}return m}(this,"iframe"),g=function(f,h){var m={},l;for(l in f)l in h&&(m[l]=f[l],delete f[l]);return m}(e,v);return c.hide().attr("src",a).attr(g).css(e).on("load",function(){b.resolve(c.show())}).appendTo(this.$instance.find("."+
this.namespace+"-content")),b.promise()}},text:{process:function(a){return d("<div>",{text:a})}}},functionAttributes:"beforeOpen afterOpen beforeContent afterContent beforeClose afterClose".split(" "),readElementConfig:function(a,b){var c=this,e=new RegExp("^data-"+b+"-(.*)"),g={};return a&&a.attributes&&d.each(a.attributes,function(){var f=this.name.match(e);if(f){var h=this.value;f=d.camelCase(f[1]);if(0<=d.inArray(f,c.functionAttributes))h=new Function(h);else try{h=JSON.parse(h)}catch(m){}g[f]=
h}}),g},extend:function(a,b){var c=function(){this.constructor=a};return c.prototype=this.prototype,a.prototype=new c,a.__super__=this.prototype,d.extend(a,this,b),a.defaults=a.prototype,a},attach:function(a,b,c){var e=this;"object"!=typeof b||0!=b instanceof d||c||(c=b,b=void 0);var g,f=(c=d.extend({},c)).namespace||e.defaults.namespace,h=d.extend({},e.defaults,e.readElementConfig(a[0],f),c);f=function(m){var l=d(m.currentTarget),n=d.extend({$source:a,$currentTarget:l},e.readElementConfig(a[0],h.namespace),
e.readElementConfig(m.currentTarget,h.namespace),c),p=g||l.data("featherlight-persisted")||new e(b,n);"shared"===p.persist?g=p:!1!==p.persist&&l.data("featherlight-persisted",p);n.$currentTarget.blur&&n.$currentTarget.blur();p.open(m)};return a.on(h.openTrigger+"."+h.namespace,h.filter,f),{filter:h.filter,handler:f}},current:function(){var a=this.opened();return a[a.length-1]||null},opened:function(){var a=this;return r(),d.grep(q,function(b){return b instanceof a})},close:function(a){var b=this.current();
if(b)return b.close(a)},_onReady:function(){var a=this;if(a.autoBind){var b=d(a.autoBind);b.each(function(){a.attach(d(this))});d(document).on("click",a.autoBind,function(c){if(!c.isDefaultPrevented()){var e=d(c.currentTarget);if(b.length!==(b=b.add(e)).length){var g=a.attach(e);(!g.filter||0<d(c.target).parentsUntil(e,g.filter).length)&&g.handler(c)}}})}},_callbackChain:{onKeyUp:function(a,b){return 27===b.keyCode?(this.closeOnEsc&&d.featherlight.close(b),!1):a(b)},beforeOpen:function(a,b){return d(document.documentElement).addClass("with-featherlight"),
this._previouslyActive=document.activeElement,this._$previouslyTabbable=d("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=d("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(c,e){return d(e).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),
a(b)},afterClose:function(a,b){a=a(b);var c=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,g){d(g).attr("tabindex",c._previousWithTabIndices[e])}),this._previouslyActive.focus(),0===k.opened().length&&d(document.documentElement).removeClass("with-featherlight"),a},onResize:function(a,b){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),a(b)},afterContent:function(a,b){a=a(b);return this.$instance.find("[autofocus]:not([disabled])").focus(),
this.onResize(b),a}}});d.featherlight=k;d.fn.featherlight=function(a,b){return k.attach(this,a,b),this};d(document).ready(function(){k._onReady()})}else"console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery.")}(jQuery);
