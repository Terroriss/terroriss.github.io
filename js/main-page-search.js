var lunrIndex;function endsWith(a,b){return-1!==a.indexOf(b,a.length-b.length)}function initLunr(){lunrIndex=lunr(function(){this.ref("title");this.field("tags");this.pipeline.remove(lunr.stemmer);this.searchPipeline.remove(lunr.stemmer);pagesIndex.forEach(function(a){this.add(a)},this)})}function search(a){return lunrIndex.search(a+"^100 "+a+"*^10 *"+a+"^10 "+a+"~2^1").map(function(b){return pagesIndex.filter(function(c){return c.title===b.ref})[0]})}
function show_all_hidden(){var a=document.querySelector(".container").querySelectorAll(".article-block");for(let b=0,c=a.length;b<c;++b)a[b].classList.remove("hidden")}initLunr();
$(document).ready(function(){document.querySelector("#searchbox-search-input").addEventListener("input",function(){var a=this.value;if(""===a)show_all_hidden();else{a=search(a);var b=document.querySelector(".container"),c=[];a.forEach(function(d){c.push(d.index)});a=b.querySelectorAll(".article-block");for(let d=0,e=a.length;d<e;++d)b=a[d],c.includes(b.dataset.index)?b.classList.remove("hidden"):b.classList.add("hidden")}});jQuery("[data-search-input]").on("input",function(){var a=jQuery(this).val(),
b=jQuery("[data-nav-id]");b.removeClass("search-match");a.length?(sessionStorage.setItem("search-value",a),$(".highlightable").unhighlight({element:"mark"}).highlight(a,{element:"mark"}),jQuery("[data-search-clear]").on("click",function(){jQuery("[data-search-input]").val("").trigger("input");sessionStorage.removeItem("search-input");$(".highlightable").unhighlight({element:"mark"});show_all_hidden()})):($("ul.topics").removeClass("searched"),b.css("display","block"),sessionStorage.removeItem("search-value"),
$(".highlightable").unhighlight({element:"mark"}))});$(".highlightable").highlight(sessionStorage.getItem("search-value"),{element:"mark"})});
jQuery.extend({highlight:function(a,b,c,d){if(3===a.nodeType){if(b=a.data.match(b))return c=document.createElement(c||"span"),c.className=d||"highlight",a=a.splitText(b.index),a.splitText(b[0].length),d=a.cloneNode(!0),c.appendChild(d),a.parentNode.replaceChild(c,a),1}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.tagName!==c.toUpperCase()||a.className!==d))for(var e=0;e<a.childNodes.length;e++)e+=jQuery.highlight(a.childNodes[e],b,c,d);return 0}});
jQuery.fn.unhighlight=function(a){var b={className:"highlight",element:"span"};jQuery.extend(b,a);return this.find(b.element+"."+b.className).each(function(){var c=this.parentNode;c.replaceChild(this.firstChild,this);c.normalize()}).end()};
jQuery.fn.highlight=function(a,b){var c={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};jQuery.extend(c,b);if(a){a.constructor===String&&(a=[a]);a=jQuery.grep(a,function(e,f){return""!=e});a=jQuery.map(a,function(e,f){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")});if(0==a.length)return this;b=c.caseSensitive?"":"i";a="("+a.join("|")+")";c.wordsOnly&&(a="\\b"+a+"\\b");var d=new RegExp(a,b);return this.each(function(){jQuery.highlight(this,d,c.element,c.className)})}};
