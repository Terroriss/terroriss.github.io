var autoComplete=function(){return function(g){function t(c,b){return c.classList?c.classList.contains(b):(new RegExp("\\b"+b+"\\b")).test(c.className)}function h(c,b,d){c.attachEvent?c.attachEvent("on"+b,d):c.addEventListener(b,d)}function k(c,b,d){c.detachEvent?c.detachEvent("on"+b,d):c.removeEventListener(b,d)}function p(c,b,d,f){h(f||document,b,function(q){for(var u,l=q.target||q.srcElement;l&&!(u=t(l,c));)l=l.parentElement;u&&d.call(l,q)})}if(document.querySelector){var e={selector:0,source:0,
minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(c,b){b=b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b=new RegExp("("+b.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+c+'">'+c.replace(b,"<b>$1</b>")+"</div>"},onSelect:function(){}},m;for(m in g)g.hasOwnProperty(m)&&(e[m]=g[m]);var n="object"==typeof e.selector?[e.selector]:document.querySelectorAll(e.selector);for(g=0;g<n.length;g++){var a=n[g];a.sc=document.createElement("div");
a.sc.className="autocomplete-suggestions "+e.menuClass;a.autocompleteAttr=a.getAttribute("autocomplete");a.setAttribute("autocomplete","off");a.cache={};a.last_val="";a.updateSC=function(c,b){var d=a.getBoundingClientRect();if(a.sc.style.left=Math.round(d.left+(window.pageXOffset||document.documentElement.scrollLeft)+e.offsetLeft)+"px",a.sc.style.top=Math.round(d.bottom+(window.pageYOffset||document.documentElement.scrollTop)+e.offsetTop)+"px",a.sc.style.width=Math.round(d.right-d.left)+"px",!c&&
(a.sc.style.display="block",a.sc.maxHeight||(a.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(a.sc,null):a.sc.currentStyle).maxHeight)),a.sc.suggestionHeight||(a.sc.suggestionHeight=a.sc.querySelector(".autocomplete-suggestion").offsetHeight),a.sc.suggestionHeight))b?(c=a.sc.scrollTop,b=b.getBoundingClientRect().top-a.sc.getBoundingClientRect().top,0<b+a.sc.suggestionHeight-a.sc.maxHeight?a.sc.scrollTop=b+a.sc.suggestionHeight+c-a.sc.maxHeight:0>b&&(a.sc.scrollTop=b+c)):a.sc.scrollTop=
0};h(window,"resize",a.updateSC);document.body.appendChild(a.sc);p("autocomplete-suggestion","mouseleave",function(){var c=a.sc.querySelector(".autocomplete-suggestion.selected");c&&setTimeout(function(){c.className=c.className.replace("selected","")},20)},a.sc);p("autocomplete-suggestion","mouseover",function(){var c=a.sc.querySelector(".autocomplete-suggestion.selected");c&&(c.className=c.className.replace("selected",""));this.className+=" selected"},a.sc);p("autocomplete-suggestion","mousedown",
function(c){if(t(this,"autocomplete-suggestion")){var b=this.getAttribute("data-val");a.value=b;e.onSelect(c,b,this);a.sc.style.display="none"}},a.sc);a.blurHandler=function(){try{var c=document.querySelector(".autocomplete-suggestions:hover")}catch(b){c=0}c?a!==document.activeElement&&setTimeout(function(){a.focus()},20):(a.last_val=a.value,a.sc.style.display="none",setTimeout(function(){a.sc.style.display="none"},350))};h(a,"blur",a.blurHandler);var r=function(c){var b=a.value;if(a.cache[b]=c,c.length&&
b.length>=e.minChars){for(var d="",f=0;f<c.length;f++)d+=e.renderItem(c[f],b);a.sc.innerHTML=d;a.updateSC(0)}else a.sc.style.display="none"};a.keydownHandler=function(c){var b=window.event?c.keyCode:c.which;if((40==b||38==b)&&a.sc.innerHTML){var d,f=a.sc.querySelector(".autocomplete-suggestion.selected");return f?(d=40==b?f.nextSibling:f.previousSibling,d?(f.className=f.className.replace("selected",""),d.className+=" selected",a.value=d.getAttribute("data-val")):(f.className=f.className.replace("selected",
""),a.value=a.last_val,d=0)):(d=40==b?a.sc.querySelector(".autocomplete-suggestion"):a.sc.childNodes[a.sc.childNodes.length-1],d.className+=" selected",a.value=d.getAttribute("data-val")),a.updateSC(0,d),!1}27==b?(a.value=a.last_val,a.sc.style.display="none"):(13==b||9==b)&&(f=a.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=a.sc.style.display&&(e.onSelect(c,f.getAttribute("data-val"),f),setTimeout(function(){a.sc.style.display="none"},20))};h(a,"keydown",a.keydownHandler);a.keyupHandler=
function(c){c=window.event?c.keyCode:c.which;if(!c||(35>c||40<c)&&13!=c&&27!=c){var b=a.value;if(b.length>=e.minChars){if(b!=a.last_val){if(a.last_val=b,clearTimeout(a.timer),e.cache){if(b in a.cache)return void r(a.cache[b]);for(c=1;c<b.length-e.minChars;c++){var d=b.slice(0,b.length-c);if(d in a.cache&&!a.cache[d].length)return void r([])}}a.timer=setTimeout(function(){e.source(b,r)},e.delay)}}else a.last_val=b,a.sc.style.display="none"}};h(a,"keyup",a.keyupHandler);a.focusHandler=function(c){a.last_val=
"\n";a.keyupHandler(c)};e.minChars||h(a,"focus",a.focusHandler)}this.destroy=function(){for(var c=0;c<n.length;c++){var b=n[c];k(window,"resize",b.updateSC);k(b,"blur",b.blurHandler);k(b,"focus",b.focusHandler);k(b,"keydown",b.keydownHandler);k(b,"keyup",b.keyupHandler);b.autocompleteAttr?b.setAttribute("autocomplete",b.autocompleteAttr):b.removeAttribute("autocomplete");document.body.removeChild(b.sc)}}}}}();
!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}();
